<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
 <html>
  <head>
<!--
  $Id: StringTests.html 108 2006-11-15 12:30:32Z wingedfox $
  $HeadURL: https://svn.debugger.ru/repos/jslibs/BrowserExtensions/tags/BrowserExtensions.001/tests/StringTests.html $
  
  Automated tests for the StringExtensions module
  @author Ilya Lebedev <ilya@lebedev.net>
-->      
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <title>BrowserExtensions/StringExtensions tests</title>
   <link rel="stylesheet" type="text/css" href="../css/jsUnitStyle.css">
   <script language="JavaScript" type="text/javascript" src="jsUnitCore.js"></script>
   <script language="JavaScript" type="text/javascript" src="../helpers.js"></script>
   <script language="JavaScript" type="text/javascript" src="../stringextensions.js"></script>
   <script language="JavaScript" type="text/javascript" src="../numberextensions.js"></script>
   <script language="JavaScript" type="text/javascript" src="../regexpextensions.js"></script>
   <script language="JavaScript" type="text/javascript">

function testLtrim() {
    assertEquals("Ltrim strips whitespaces, when no parameter supplied", "test", "   test".ltrim());
    assertEquals("Ltrim strips a char, when char parameter supplied", "test", "1111test".ltrim('1'));
    assertEquals("Ltrim strips a sequentional substring, when string parameter supplied", "test", "rereretest".ltrim('re'));
}
function testRtrim() {
    assertEquals("Rtrim strips whitespaces, when no parameter supplied", "test", "test    ".rtrim());
    assertEquals("Rtrim strips a char, when char parameter supplied", "test", "test11111".rtrim('1'));
    assertEquals("Rtrim strips a sequentional substring, when string parameter supplied", "test", "testrerere".rtrim('re'));
}
function testTrim() {
    assertEquals("Trim strips whitespaces, when no parameter supplied", "test", "    test    ".trim());
    assertEquals("Trim strips a char, when char parameter supplied", "2test", "11112test11111".trim('1'));
    assertEquals("Trim strips a sequentional substring, when string parameter supplied", "test", "rereretestrerere".trim('re'));
}
function testDup() {
    assertEquals("Dup correctly duplicates the string", "testtest", "test".dup());
}       
function testPadding() {
    assertEquals("Padding does not pad, when no number supplied", "test", "test".padding());
    assertEquals("Padding uses space by default", "test   ", "test".padding(7));
    assertEquals("Padding applies padding at the left side, when negative number supplied", "   test", "test".padding(-7));
    assertEquals("Padding does use supplied fill char", "000test", "test".padding(-7,'0'));
    assertEquals("Padding does use only first char from the supplied string", "000test", "test".padding(-7,'01234'));
}
function testPadLeft() {
    assertEquals("PadLeft is equal to padding with negative counter", "test".padding(-7), "test".padLeft(7));
    assertEquals("PadLeft does use specified fill char", "111test", "test".padLeft(7, '1'));
}
function testPadRight() {
    assertEquals("PadRight is equal to padding with positive counter", "test".padding(7), "test".padRight(7));
    assertEquals("PadRight does use specified fill char", "test111", "test".padRight(7, '1'));
}
function testRepeat() {
    assertEquals("Repeat does not repeat, when no number specified", "", "test".repeat());
    assertEquals("Repeat does not repeat, when negative number specified", "", "test".repeat(-2));
    assertEquals("Repeat return the same string, when 1 specified", "test", "test".repeat(1));
    assertEquals("Repeat does repeat string exact number of times, as specified", "testtesttest", "test".repeat(3));
}
function testSprintfCommon() {
    assertEquals("%c should print the char from supplied code", "\"", "%c".sprintf(34));
    assertEquals("%d should print trunced floats", "34", "%d".sprintf(34.41));
    assertEquals("%u should trunc vars and print absolute value", "34", "%u".sprintf(-34.41));
    assertEquals("%2$d %d %0$d", "3 1 1", "%2$d %d %0$d".sprintf(1, 2, 3));
    assertEquals("<% d>", "< 12>", "<% d>".sprintf(12));
    assertEquals("<%+d>", "<+12>", "<%+d>".sprintf(12));
    assertEquals("<%6s>", "<    12>", "<%6s>".sprintf(12));
    assertEquals("<%-6s>", "<12    >", "<%-6s>".sprintf(12));
    assertEquals("<%#x>", "<0xc>", "<%#x>".sprintf(12));
}    
function testSprintfFlags() {
    assertEquals("<%06s>", "<000012>", "<%06s>".sprintf(12));
    assertEquals("<%+.6d>", "<+000012>", "<%+.6d>".sprintf(12));
    assertEquals("<%+.6d>", "<-000012>", "<%+.6d>".sprintf(-12));
    assertEquals("<% .6d>", "< 000012>", "<% .6d>".sprintf(12));
    assertEquals("<% .6d>", "<-000012>", "<% .6d>".sprintf(-12));
}
function testSprintfMinwidth() {
    // minimum width
    assertEquals("<%03d>", "<001>", "<%03d>".sprintf(1));
    assertEquals("<%+08.3d>", "<    +001>", "<%+08.3d>".sprintf(1));
    assertEquals("<%+08.3d>", "<    -001>", "<%+08.3d>".sprintf(-1));
    assertEquals("<%s>", "<a>", "<%s>".sprintf('a'));
    assertEquals("<%6s>", "<     a>", "<%6s>".sprintf('a'));
    assertEquals("<%*s>", "<     a>", "<%*s>".sprintf(6,'a'));
    assertEquals("<%*1$s>", "<     a>", "<%*1$s>".sprintf('a',6));
    assertEquals("<%2s>", "<long>", "<%2s>".sprintf('long'));
}    
function testSprintfPrecision() {
    // precision
    assertEquals("<%f>", "<1.000000>", "<%f>".sprintf(1));
    assertEquals("<%.1f>", "<1.0>", "<%.1f>".sprintf(1));
    assertEquals("<%.0f>", "<1>", "<%.0f>".sprintf(1));
    assertEquals("<%e>", "<1.000000e+1>", "<%e>".sprintf(10));
    assertEquals("<%.1e>", "<1.0e+1>", "<%.1e>".sprintf(10));

    assertEquals("<%.6x>", "<000001>", "<%.6x>".sprintf(1));
    assertEquals("<%#.6x>", "<0x000001>", "<%#.6x>".sprintf(1));
    assertEquals("<%-10.6x>", "<000001    >", "<%-10.6x>".sprintf(1));

    assertEquals("<%.5s>", "<trunc>", "<%.5s>".sprintf('truncated'));
    assertEquals("<%10.5s>", "<     trunc>", "<%10.5s>".sprintf('truncated'));

    assertEquals("<%.*x>", "<000001>", "<%.*x>".sprintf(6,1));
    assertEquals("<%.*1$x>", "<000001>", "<%.*1$x>".sprintf(1,6));
}
function testSprintfArgOrder() {
    // precision
    assertEquals("<%*.*s>", "<te   >", "<%*.*s>".sprintf(-5,2,'test'));
    assertEquals("<%-*.*s>", "<te   >", "<%-*.*s>".sprintf(5,2,'test'));
    assertEquals("<%*.*s>", "<   te>", "<%*.*s>".sprintf(5,2,'test'));

    assertEquals("<%*0$.*s>", "<te>", "<%*0$.*s>".sprintf(2,'test'));
    assertEquals("<%-*0$.*s>", "<te>", "<%-*0$.*s>".sprintf(-2,'test'));
    assertEquals("<%*0$.*s>", "<te>", "<%*0$.*s>".sprintf(2,'test'));

    assertEquals("%1$d %d\n", "34 12\n", "%1$d %d\n".sprintf(12, 34));
    assertEquals("%1$d %d %d\n", "34 12 34\n", "%1$d %d %d\n".sprintf(12, 34));
    assertEquals("%2$d %d %d\n", "56 12 34\n", "%2$d %d %d\n".sprintf(12, 34, 56));
    assertEquals("%1$*2$d %d\n", " 34 12\n", "%1$*2$d %d\n".sprintf(12, 34, 3));
} 
</script>
</head>

<body>
<h1>Tests for the String extensions</h1>

<p>This page contains tests for the String.prototype extension methods. To see them, take a look at the source.</p>
</body>
</html>
