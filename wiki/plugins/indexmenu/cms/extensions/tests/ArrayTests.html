<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
        <head>
                <title>Tests for the Helper functions</title>
<!--
  $Id: ArrayTests.html 130 2006-11-30 20:44:53Z wingedfox $
  $HeadURL: https://svn.debugger.ru/repos/jslibs/BrowserExtensions/tags/BrowserExtensions.001/tests/ArrayTests.html $
  
  Automated tests for the Array extensions
  @author Ilya Lebedev <ilya@lebedev.net>
-->      
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>BrowserExtensions/Array extensions tests</title>
        <link rel="stylesheet" type="text/css" href="../css/jsUnitStyle.css">
        <script language="JavaScript" type="text/javascript" src="jsUnitCore.js"></script>
        <script language="JavaScript" type="text/javascript" src="../helpers.js"></script>
        <script language="JavaScript" type="text/javascript" src="../arrayextensions.js"></script>
        <script language="JavaScript" type="text/javascript">
            function testIndexOf() {
                var arr = [1,2,3,4,4,3,2,1]
                assertEquals("Look for non-existent value (-1)", -1, arr.indexOf(-1));
                assertEquals("Look for non-existent value (null)", -1, arr.indexOf(null));
                assertEquals("Look for the existent value return its index", 2, arr.indexOf(3));
                assertEquals("Look for the existent value from a point return its index", 2, arr.indexOf(3,1));
                assertEquals("Look for the existent value from a point return its index", 2, arr.indexOf(3,2));
                assertEquals("Look for the existent value from a point return its index", 5, arr.indexOf(3,4));
            }
            function testLastIndexOf() {
                var arr = [1,2,3,4,4,3,2,1]
                assertEquals("Look for non-existent value (-1)", -1, arr.lastIndexOf(-1));
                assertEquals("Look for non-existent value (null)", -1, arr.lastIndexOf(null));
                assertEquals("Look for the existent value return its index", 6, arr.lastIndexOf(2));
                assertEquals("Look for the existent value from a point return its index", 6, arr.lastIndexOf(2,7));
                assertEquals("Look for the existent value from a point return its index", 6, arr.lastIndexOf(2,6));
                assertEquals("Look for the existent value from a point return its index", 1, arr.lastIndexOf(2,5));
            }
            function testMap() {
                var arr = [1,2,3,4];
                var m = function(v) {
                    return v+1;
                }
                try { 
                    assertObjectEquals("Non-function return array itself (null)", arr, arr.map(null));
                } catch (e) { info ('Some error thrown: ' + e.message) }
                try { 
                    assertObjectEquals("Non-function return array itself (234)", arr, arr.map(234));
                } catch (e) { info ('Some error thrown: ' + e.message) }
                try { 
                    assertObjectEquals("Valid callback does modify the array", [2,3,4,5], arr.lastIndexOf(m));
                } catch (e) { info ('Some error thrown: ' + e.message) }
            }
            function testUnique() {
                var arr = [1,2,3,4,4,3,2,1]
                assertObjectEquals("Empty array is unique", [], [].unique());
                assertObjectEquals("Duplicate values will be removed)", [1,2,3,4], arr.unique());
            }
            function testRange() {
                assertNull("Null, when end is incorrect", Array.range('null'));
                assertObjectEquals("Array with 0 when only 0 supplied ", [0], Array.range(0));
                assertObjectEquals("Array with 1..5 values when 1, 5 supplied ", [1,2,3,4,5], Array.range(1,5));
                assertObjectEquals("Array with -5..0 when only -5 supplied ", [-5,-4,-3,-2,-1,0], Array.range(-5));
                assertObjectEquals("Array with -2..2 when -2, 2 supplied ", [-2,-1,0,1,2], Array.range(-2,2));
                assertObjectEquals("Array with -2..2 when 2, -2 supplied ", [-2,-1,0,1,2], Array.range(2,-2));
                assertObjectEquals("Array with -1,-0.5,0 when -1, 0 , 0.5 supplied ", [-1,-0.5,0], Array.range(-1,0,0.5));
                assertObjectEquals("Array with 0,-0.5,-1 when -1, 0 , -0.5 supplied ", [0,-0.5,-1], Array.range(-1,0,-0.5));
            }                        
            function testFlatten() {
                assertObjectEquals("Empty array, when empty array is supplied", [], [].flatten());
                assertObjectEquals("Empty array, when array of empty arrays is supplied", [], [[],[],[]].flatten());
                assertObjectEquals("Empty array, when cols are beyound the array borders", [], [[1,2],[1,2],[1]].flatten(10));
                assertObjectEquals("Array with values, when correct array is supplied", [1,2,3,4,5], [[1,2],[3,4],[5]].flatten());
                assertObjectEquals("Array with cpecific column, when values is supplied", [1,3,5], [[1,2],[3,4],[5]].flatten(0));
                assertObjectEquals("Array with cpecific column, when values is supplied", [1,2,3,4,5], [[1,2,6],[3,4,7],[5]].flatten([0,1]));
                
            }                        
        </script>
    </head>
    <body>
        <h1>Tests for the Array extensions</h1>
        <p>This page contains tests for the Helpers functions. To see them, take a look at the source.</p>
        </body>
</html>
